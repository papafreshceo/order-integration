<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì£¼ë¬¸í†µí•© ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #f5f5f5;
        }
        
        .header {
            background: white;
            padding: 20px;
            border-bottom: 2px solid #2563eb;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #333;
            text-align: center;
        }
        
        /* íƒ­ ë©”ë‰´ */
        .tabs {
            background: white;
            padding: 0 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab-menu {
            display: flex;
            gap: 0;
        }
        
        .tab-btn {
            padding: 15px 30px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 15px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab-btn:hover {
            background: #f8f9fa;
        }
        
        .tab-btn.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
            font-weight: 600;
        }
        
        /* ì»¨í…ì¸  ì˜ì—­ */
        .container {
            max-width: 1400px;
            margin: 20px auto;
            padding: 0 20px;
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-height: 500px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn {
            padding: 10px 20px;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn:hover {
            background: #1d4ed8;
        }
        
        /* ì—‘ì…€ ì—…ë¡œë“œ ì˜ì—­ */
        .upload-area {
            border: 2px dashed #ddd;
            padding: 40px;
            text-align: center;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .upload-area:hover {
            border-color: #2563eb;
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ì£¼ë¬¸í†µí•© ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
    </div>
    
    <div class="tabs">
        <div class="tab-menu">
            <button class="tab-btn active" onclick="showTab('realtime')">ì‹¤ì‹œê°„ ì£¼ë¬¸í˜„í™©</button>
            <button class="tab-btn" onclick="showTab('search')">ì£¼ë¬¸ì¡°íšŒ</button>
            <button class="tab-btn" onclick="showTab('excel')">ì£¼ë¬¸í†µí•©(Excel)</button>
            <button class="tab-btn" onclick="showTab('invoice')">ì†¡ì¥ë“±ë¡</button>
        </div>
    </div>
    
    <div class="container">
        <!-- ì‹¤ì‹œê°„ ì£¼ë¬¸í˜„í™© íƒ­ -->
        <div id="realtime" class="tab-content active">
            <h2>ì‹¤ì‹œê°„ ì£¼ë¬¸í˜„í™©</h2>
            <div class="loading">ë°ì´í„° ë¡œë”© ì¤‘...</div>
            <table id="realtimeTable" style="display:none;">
                <thead id="realtimeHead"></thead>
                <tbody id="realtimeBody"></tbody>
            </table>
        </div>
        
        <!-- ì£¼ë¬¸ì¡°íšŒ íƒ­ -->
        <div id="search" class="tab-content">
            <h2>ì£¼ë¬¸ì¡°íšŒ</h2>
            <div style="margin: 20px 0;">
                <input type="date" id="startDate" style="padding: 8px; margin-right: 10px;">
                <span>~</span>
                <input type="date" id="endDate" style="padding: 8px; margin: 0 10px;">
                <button class="btn" onclick="searchOrders()">ì¡°íšŒ</button>
            </div>
            <div id="searchResult">ì¡°íšŒ ê²°ê³¼ê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤.</div>
        </div>
        
        <!-- ì£¼ë¬¸í†µí•©(Excel) íƒ­ -->
        <div id="excel" class="tab-content">
            <h2>ì£¼ë¬¸í†µí•© (Excel)</h2>
            <div class="upload-area">
                <p>ğŸ“ ì—‘ì…€ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</p>
                <input type="file" id="excelFile" accept=".xlsx,.xls" style="margin-top: 20px;">
            </div>
            <button class="btn" onclick="processExcel()">ì—‘ì…€ ì²˜ë¦¬</button>
            <div id="excelResult"></div>
        </div>
        
        <!-- ì†¡ì¥ë“±ë¡ íƒ­ -->
        <div id="invoice" class="tab-content">
            <h2>ì†¡ì¥ë“±ë¡</h2>
            <div style="margin: 20px 0;">
                <label>ì£¼ë¬¸ë²ˆí˜¸: <input type="text" id="orderNo" style="padding: 8px; margin: 0 10px;"></label><br><br>
                <label>ì†¡ì¥ë²ˆí˜¸: <input type="text" id="invoiceNo" style="padding: 8px; margin: 0 10px;"></label><br><br>
                <label>íƒë°°ì‚¬: 
                    <select id="courier" style="padding: 8px; margin: 0 10px;">
                        <option>CJëŒ€í•œí†µìš´</option>
                        <option>í•œì§„íƒë°°</option>
                        <option>ë¡¯ë°íƒë°°</option>
                        <option>ìš°ì²´êµ­íƒë°°</option>
                    </select>
                </label><br><br>
                <button class="btn" onclick="registerInvoice()">ì†¡ì¥ ë“±ë¡</button>
            </div>
            <div id="invoiceResult"></div>
        </div>
    </div>

    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤ì‹œê°„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        window.onload = function() {
            loadRealtimeData();
        };
        
        // íƒ­ ì „í™˜
        function showTab(tabName) {
            // ëª¨ë“  íƒ­ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ì„ íƒëœ íƒ­ í‘œì‹œ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // íƒ­ë³„ ë°ì´í„° ë¡œë“œ
            if (tabName === 'realtime') {
                loadRealtimeData();
            }
        }
        
        // ì‹¤ì‹œê°„ ë°ì´í„° ë¡œë“œ
        function loadRealtimeData() {
            fetch('/api/orders')
                .then(response => response.json())
                .then(data => {
                    displayRealtimeData(data.data);
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.querySelector('.loading').innerHTML = 'ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨';
                });
        }
        
        // ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ
        function displayRealtimeData(data) {
            if (!data || data.length === 0) {
                document.querySelector('.loading').innerHTML = 'ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤';
                return;
            }
            
            const table = document.getElementById('realtimeTable');
            const thead = document.getElementById('realtimeHead');
            const tbody = document.getElementById('realtimeBody');
            
            // ê¸°ì¡´ ë°ì´í„° ì´ˆê¸°í™”
            thead.innerHTML = '';
            tbody.innerHTML = '';
            
            // í—¤ë” ìƒì„±
            const headerRow = document.createElement('tr');
            data[0].forEach(header => {
                const th = document.createElement('th');
                th.textContent = header;
                headerRow.appendChild(th);
            });
            thead.appendChild(headerRow);
            
            // ë°ì´í„° í–‰ ìƒì„±
            for (let i = 1; i < Math.min(data.length, 20); i++) {
                const row = document.createElement('tr');
                data[i].forEach(cell => {
                    const td = document.createElement('td');
                    td.textContent = cell || '';
                    row.appendChild(td);
                });
                tbody.appendChild(row);
            }
            
            document.querySelector('.loading').style.display = 'none';
            table.style.display = 'table';
        }
        
        // ì£¼ë¬¸ì¡°íšŒ
        function searchOrders() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            document.getElementById('searchResult').innerHTML = 
                `${startDate} ~ ${endDate} ê¸°ê°„ ì¡°íšŒ ê¸°ëŠ¥ êµ¬í˜„ ì˜ˆì •`;
        }
        
        // ì—‘ì…€ ì²˜ë¦¬
        function processExcel() {
            const file = document.getElementById('excelFile').files[0];
            if (!file) {
                alert('íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”');
                return;
            }
            document.getElementById('excelResult').innerHTML = 
                `${file.name} íŒŒì¼ ì²˜ë¦¬ ê¸°ëŠ¥ êµ¬í˜„ ì˜ˆì •`;
        }
        
        // ì†¡ì¥ ë“±ë¡
        function registerInvoice() {
            const orderNo = document.getElementById('orderNo').value;
            const invoiceNo = document.getElementById('invoiceNo').value;
            const courier = document.getElementById('courier').value;
            
            if (!orderNo || !invoiceNo) {
                alert('ì£¼ë¬¸ë²ˆí˜¸ì™€ ì†¡ì¥ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }
            
            document.getElementById('invoiceResult').innerHTML = 
                `ì£¼ë¬¸ë²ˆí˜¸: ${orderNo}<br>ì†¡ì¥ë²ˆí˜¸: ${invoiceNo}<br>íƒë°°ì‚¬: ${courier}<br>ë“±ë¡ ê¸°ëŠ¥ êµ¬í˜„ ì˜ˆì •`;
        }
    </script>
</body>
</html>
